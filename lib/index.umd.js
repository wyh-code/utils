!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ostore_utils={})}(this,(function(e){"use strict";var t=/^rgba?\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*(?:,\s*(1|0|0?\.\d+))?\s*\)$/,n=/^hsl\(\s*(360|3[0-5]\d|[12]?\d{1,2})\s*,\s*(100|[1-9]?\d)%\s*,\s*(100|[1-9]?\d)%\s*\)$/,r=/^hsla\(\s*(360|3[0-5]\d|[12]?\d{1,2})\s*,\s*(100|[1-9]?\d)%\s*,\s*(100|[1-9]?\d)%\s*,\s*(1|0|0\.\d+|\.\d+)\s*\)$/;function o(e){var n=Array.from(e.match(t)||[]);n[0];var r=n[1],o=n[2],c=n[3],i=n[4],s=void 0===i?1:i,u=function(e){return Number(e).toString(16).padStart(2,"0")},l=void 0!==s?u(Math.round(255*Number(s))):"",d=a(r,o,c),h=a(r,o,c,s);return{hex:"#".concat(u(r)).concat(u(o)).concat(u(c)),hexa:"#".concat(u(r)).concat(u(o)).concat(u(c)).concat(l),rgb:"rgba(".concat(r,", ").concat(o,", ").concat(c,")"),rgba:"rgba(".concat(r,", ").concat(o,", ").concat(c,", ").concat(s,")"),hsl:d,hsla:h,r:r,g:o,b:c,a:s}}function a(e,t,n,r){e/=255,t/=255,n/=255;var o,a,c=Math.max(e,t,n),i=Math.min(e,t,n),s=(c+i)/2;if(c===i)o=a=0;else{var u=c-i;switch(a=s>.5?u/(2-c-i):u/(c+i),c){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return a*=100,s*=100,o=Math.round(360*o),a=Math.round(a),s=Math.round(s),void 0!==r?"hsla(".concat(o,", ").concat(a,"%, ").concat(s,"%, ").concat(r,")"):"hsl(".concat(o,", ").concat(a,"%, ").concat(s,"%)")}function c(e){var t=Array.from(e.match(n)||[]);t[0];var r=t[1],a=t[2],c=t[3];a/=100,c/=100;var i=(1-Math.abs(2*c-1))*a,s=i*(1-Math.abs(r/60%2-1)),u=c-i/2,l=0,d=0,h=0;r>=0&&r<60?(l=i,d=s,h=0):r>=60&&r<120?(l=s,d=i,h=0):r>=120&&r<180?(l=0,d=i,h=s):r>=180&&r<240?(l=0,d=s,h=i):r>=240&&r<300?(l=s,h=i,d=0):r>=300&&r<360&&(l=i,h=s,d=0),l=Math.round(255*(l+u)),d=Math.round(255*(d+u)),h=Math.round(255*(h+u));var f=o("rgb(".concat(l,", ").concat(d,", ").concat(h,")"));return{rgb:"rgb(".concat(l,", ").concat(d,", ").concat(h,")"),rgba:"rgb(".concat(l,", ").concat(d,", ").concat(h,", 1)"),hex:f.hex,hexa:f.hexa,hsl:e,hsla:"hsla(".concat(r,", ").concat(Math.round(100*a),"%, ").concat(Math.round(100*c),"%, 1)"),r:l,g:d,b:h,a:1}}function i(e){if(!e)return new Date;if(e instanceof Date)return e;if("string"==typeof e){var t=e.indexOf("-")>-1?"-":"/",n=e.split(t);return n[2]?new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2])):new Date}return new Date}function s(e){var t=parseInt(e.toString());return t%4==0&&t%100!=0||t%400==0}function u(e){return[31,s(e.year)?29:28,31,30,31,30,31,31,30,31,30,31][e.month]}function l(e){return new Date(e.year,e.month,1).getDay()}function d(e){var t=i(e),n={year:t.getFullYear(),month:t.getMonth()},r=u(n),o=l(n);return{year:n.year,month:n.month,days:r,beginWeek:o}}var h=function(e,t){if(e){var n=e.parentNode;return n&&t?Array.from(n.classList).includes(t)?n:h(n,t):n}};"function"==typeof SuppressedError&&SuppressedError;var f=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o,a=(r=t.map((function(e){var t;return(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0})),o=Math.max.apply(Math,r),Math.pow(10,o)),c=t.map((function(e){return Math.round(e*a)})),i=0;switch(e){case"+":i=c.reduce((function(e,t){return e+t}),i)/a;break;case"-":i=c.reduce((function(e,t){return e-t}))/a;break;case"*":i=c.reduce((function(e,t){return e*t}))/Math.pow(a,c.length);break;case"/":i=c.reduce((function(e,t){return e/t}))}return{result:i,next:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return f.apply(void 0,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e,i],t,!1))}}};e.asyncSleep=function(e){return new Promise((function(t){setTimeout(t,e)}))},e.compressImage=function(e,t){var n=t||{},r=n.maxWidth,o=n.maxHeight,a=n.quality,c=n.mime;return a=a||.8,c=c||"image/jpeg",new Promise((function(t,n){var i=new Image,s=URL.createObjectURL(e);i.onload=function(){var e=document.createElement("canvas"),u=i.width,l=i.height;r=r||u,o=o||l,u>l?u>r&&(l*=r/u,u=r):l>o&&(u*=o/l,l=o),e.width=u,e.height=l,e.getContext("2d").drawImage(i,0,0,u,l),e.toBlob((function(e){e?t(e):n(new Error("Canvas to Blob conversion failed"))}),c,a),URL.revokeObjectURL(s)},i.onerror=function(){n(new Error("There was an error loading the image.")),URL.revokeObjectURL(s)},i.src=s}))},e.compute=f,e.copy=function(e,t){if(e){var n=document.createElement("input");n.setAttribute("readonly","readonly"),n.setAttribute("value",e),document.body.appendChild(n),n.setSelectionRange(0,99999),n.select();try{document.execCommand("Copy")?(document.execCommand("Copy"),t&&t({status:!0})):t&&t({status:!1,message:"document.execCommand('Copy')不存在"})}catch(e){t&&t({status:!1,message:e.message})}document.body.removeChild(n)}},e.copyAsync=function(e){return new Promise((function(t,n){if(e){var r=document.createElement("input");r.setAttribute("readonly","readonly"),r.setAttribute("value",e),document.body.appendChild(r),r.setSelectionRange(0,99999),r.select();try{document.execCommand("Copy")?(document.execCommand("Copy"),t({status:!0})):n({status:!1,message:"document.execCommand('Copy')不存在"})}catch(e){n({status:!1,message:e.message})}document.body.removeChild(r)}}))},e.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new Blob([r],{type:n})},e.debounce=function(e,t,n){void 0===n&&(n=!1);var r=null;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=this,i=n&&null===r;null!==r&&clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(c,o)}),t),i&&e.apply(c,o)}},e.downloadFile=function(e,t){return fetch(e).then((function(e){return e.blob()})).then((function(e){var n=new Blob([e]),r=document.createElement("a");return r.href=URL.createObjectURL(n),r.download=t,r.click(),URL.revokeObjectURL(r.href),{status:!0}})).catch((function(e){return{status:!1,message:e.message}}))},e.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},e.formatBankCardNumber=function(e){return e.replace(/\D/g,"").replace(/(\d{4})(?=\d)/g,"$1 ").trim()},e.formatFileSize=function(e,t,n){if(void 0===t&&(t=2),void 0===n&&(n=1024),e<0)throw new Error("File size cannot be negative.");if(0===e)return"0 Bytes";var r=n,o=t<0?0:t,a=1024===n?["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]:["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(r));if(c>=a.length)throw new Error("File size is too large and exceeds the supported unit range.");return parseFloat((e/Math.pow(r,c)).toFixed(o))+" "+a[c]},e.getBase64ImageSize=function(e){var t=e.split(",")[1]||e,n=t.length-(t.endsWith("==")?2:t.endsWith("=")?1:0);return Math.ceil(n/4*3)},e.getBeginDayOfMonth=l,e.getCookies=function(e){var t=document.cookie.split(";").reduce((function(e,t){return e[t.split("=")[0].trim()]=t.split("=")[1].trim(),e}),{});return e?t[e]:t},e.getDataType=function(e){var t=Object.prototype.toString.call(e).match(/\[object (.*?)\]/);return t&&t[1].toLowerCase()},e.getDaysOfMonth=u,e.getImageSize=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t({width:r.width,height:r.height})},r.onerror=function(e){n(new Error("Image could not be loaded."))},r.src=e}))},e.getLocalStorage=function(e,t){var n,r,o,a=localStorage.getItem(e);if(a)try{var c=JSON.parse(a),i=Date.now();if((null===(n=c.options)||void 0===n?void 0:n.endTime)&&i>c.options.endTime)return localStorage.removeItem(e),null;if((null===(r=c.options)||void 0===r?void 0:r.expiry)&&i>c.options.expiry)return localStorage.removeItem(e),null;if(null===(o=c.options)||void 0===o?void 0:o.permissions){if(!t||!t.length)return null;if(!c.options.permissions.some((function(e){return t.includes(e)})))return console.error("Access denied: User does not have the required permissions."),null}return c.data}catch(e){return console.error("Error parsing localStorage item:",e),null}return null},e.getMonthDays=function(e){for(var t=d(e),n=t.year,r=t.month,o=t.days,a=t.beginWeek,c=[],i=o+a+(7-(o+a)%7),s=0;s<i;s++){var u=s-a+1,l=new Date(n,r,u).getFullYear(),h=new Date(n,r,u).getMonth(),f=new Date(n,r,u).getDate(),m=new Date(n,r,u).getTime();c.push({year:l,month:h,day:f,time:m})}return c},e.getMonthInfo=d,e.getParentNode=h,e.getSessionStorage=function(e,t){var n,r,o,a=sessionStorage.getItem(e);if(a)try{var c=JSON.parse(a),i=Date.now();if((null===(n=c.options)||void 0===n?void 0:n.endTime)&&i>c.options.endTime)return sessionStorage.removeItem(e),null;if((null===(r=c.options)||void 0===r?void 0:r.expiry)&&i>c.options.expiry)return sessionStorage.removeItem(e),null;if(null===(o=c.options)||void 0===o?void 0:o.permissions){if(!t||!t.length)return null;if(!c.options.permissions.some((function(e){return t.includes(e)})))return console.error("Access denied: User does not have the required permissions."),null}return c.data}catch(e){return console.error("Error parsing sessionStorage item:",e),null}return null},e.getUrlParams=function(e){var t=new URL(window.location.href),n=Object.fromEntries(new URLSearchParams(t.search));return e?n[e]:n},e.hasNotNullValue=function(e){var t,n=!1;return null===(t=Object.values(e))||void 0===t||t.forEach((function(e){""!==e&&null!=e&&(n=!0)})),n},e.hasNullValue=function(e){var t,n=!1;return null===(t=Object.values(e))||void 0===t||t.forEach((function(e){""!==e&&null!==e||(n=!0)})),n},e.hexRegex=/^#(?:[A-Fa-f0-9]{3}){1,2}$|^#(?:[A-Fa-f0-9]{4}){1,2}$/,e.hexToRgba=function(e){e=e.replace(/^#/,""),[3,4].includes(e.length)&&(e=e.split("").map((function(e){return e+e})).join("")),6===e.length&&(e+="FF");var t=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16),o=+(parseInt(e.slice(6,8),16)/255).toFixed(2);return{hsl:a(t,n,r),hsla:a(t,n,r,o),rgb:"rgba(".concat(t,", ").concat(n,", ").concat(r,")"),rgba:"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")"),hex:"#".concat(e.slice(0,6)),hexa:"#".concat(e),r:t,g:n,b:r,a:o}},e.hslRegex=n,e.hslToRgb=c,e.hslaRegex=r,e.hslaToRgba=function(e){var t=Array.from(e.match(r)||[]);t[0];var n=t[1],a=t[2],i=t[3],s=t[4],u=void 0===s?1:s,l=c("hsl(".concat(n,", ").concat(a,"%, ").concat(i,"%)")),d=l.r,h=l.g,f=l.b,m=o("rgb(".concat(d,", ").concat(h,", ").concat(f,", ").concat(u,")"));return{rgb:"rgb(".concat(d,", ").concat(h,", ").concat(f,")"),rgba:"rgb(".concat(d,", ").concat(h,", ").concat(f,", ").concat(u,")"),hex:m.hex,hexa:m.hexa,hsl:"hsl(".concat(n,", ").concat(a,"%, ").concat(i,"%)"),hsla:e,r:d,g:h,b:f,a:u}},e.imageToBase64=function(e){return new Promise((function(t,n){if(e)if(e.type.startsWith("image/")){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}else n(new Error("文件内容为空"));else n(new Error("文件内容为空"))}))},e.isDate=i,e.isLeapYear=s,e.numberWithCommas=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},e.packUrlParams=function(e){void 0===e&&(e={});var t="";for(var n in e)t+="".concat(n,"=").concat(e[n],"&");return t.slice(0,-1)},e.requestFullscreen=function(e){var t=document.getElementById(e);t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},e.rgbaRegex=t,e.rgbaToHex=o,e.rgbaToHsl=a,e.setLocalStorage=function(e,t,n){var r;try{var o=Date.now(),a=null==n?void 0:n.expiry;a&&(a+=o);var c={data:t,options:n};localStorage.setItem(e,JSON.stringify(c))}catch(e){r=e}return r},e.setSearchParams=function(e){var t=new URL(window.location.href),n=new URLSearchParams(t.search);for(var r in e)n.set(r,e[r]);t.search=n.toString(),history.pushState({url:t.href,title:document.title},document.title,t.href)},e.setSessionStorage=function(e,t,n){var r;try{var o=Date.now(),a=null==n?void 0:n.expiry;a&&(a+=o);var c={data:t,options:n};sessionStorage.setItem(e,JSON.stringify(c))}catch(e){r=e}return r},e.sleep=function(e){},e.throttle=function(e,t){var n,r,o;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var i=this;n?(clearTimeout(r),r=setTimeout((function(){Date.now()-o>=t&&(e.apply(i,a),o=Date.now())}),Math.max(t-(Date.now()-o),0))):(e.apply(i,a),o=Date.now(),n=!0)}},e.uniqueByKey=function(e,t){var n={};return e.reduce((function(e,r){return r&&"object"==typeof r&&!n[r[t]]&&(n[r[t]]=!0,e.push(r)),e}),[])}}));
